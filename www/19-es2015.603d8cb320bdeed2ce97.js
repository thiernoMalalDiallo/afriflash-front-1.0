(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{"xAg/":function(n,e,l){"use strict";l.r(e);var t=l("8Y7J");class i{}var s=l("pMnS"),r=l("s7LF"),o=l("SVse"),a=l("oBZk"),u=l("ZZ/e"),c=l("KSvv"),d=l("unWy"),h=l("qaYj"),p=l("LpJ+"),m=l("NQmN"),g=l("wnhN"),f=l("l3f7"),v=l("XTv4"),P=l("NMeP"),y=l("xW6c"),b=l("mrSG"),C=l("zjz6"),F=l("/SEQ");class R{constructor(n,e,l,t,i,s,r,o,a){this.observable=n,this.navCtrl=e,this.httpAnnonce=l,this.dataProvider=t,this.config=i,this.filterProvider=s,this.route=r,this.session=o,this.utilsProvider=a,this.secondaryFilters={proSort:"Professionnel",ParticulierSort:"Particulier",selectFiltre:""},this.hiddeSpinner=!0,this.positions=[],this.currentPage=1,this.limit=100,this.skip=0,this.nbrAnnoncesPerPage=10,this.categoryDefault=""}ngOnInit(){this.positions=[],this.choicies=this.dataProvider.getChoices(),this.isWeb=this.config.isWeb(),this.session.remove("source").then(()=>{this.getAnnonces()})}ionViewWillEnter(){return b.__awaiter(this,void 0,void 0,(function*(){const n=yield this.session.getItem("source");n&&"home"===n&&(this.subscribe=this.route.queryParams.subscribe(n=>{n&&(this.criteres={acountType:"",category:n.category,country:"",filters:{},subCategories:null,typeAnnonce:""},this.annonces=null,this.annoncesTmp=null,this.skip=0,this.currentPage=1,this.categoryDefault=n.category,this.observable.initDefaultCategory.emit(this.categoryDefault),this.getAnnonces())}))}))}ionViewWillLeave(){return b.__awaiter(this,void 0,void 0,(function*(){console.log("Unsuscribe observer"),yield this.session.remove("source"),this.subscribe&&this.subscribe.unsubscribe()}))}getFilters(n){this.criteres=n,this.annonces=null,this.annoncesTmp=null,this.skip=0,this.currentPage=1,this.getAnnonces()}getPosition(n){this.currentPage=n,this.content.scrollToTop(300),n%5!=0||this.positions.includes(n)||(this.positions.push(n),this.skip=this.skip+this.limit,this.getAnnonces())}moreDetails(n){this.navCtrl.navigateForward("details-annonce",{queryParams:{id:n}})}getAnnonces(){let n={};console.log(this.criteres),n=this.criteres&&this.criteresExist()?{limit:this.limit,skip:this.skip,filters:this.criteres}:{limit:this.limit,skip:this.skip},this.hiddeSpinner=!1,this.httpAnnonce.getAllWithFilters("annonce/annonces",n).subscribe(n=>{this.annonces||this.annoncesTmp||(this.annonces=[],this.annoncesTmp=[],this.positions=[]),this.annonces=this.annonces.concat(n.slice()),this.annoncesTmp=this.annoncesTmp.concat(n.slice()),this.results=this.utilsProvider.customizeNumber(n.length),this.hiddeSpinner=!0})}getChoiceSecondFilter(n){this.secondaryFilters.selectFiltre=n,this.reloadAnnonces()}handleCheckboxPro(n){n.target.checked?(this.secondaryFilters.proSort=n.target.value,this.reloadAnnonces()):(this.secondaryFilters.proSort="",this.reloadAnnonces())}handleCheckboxParticulier(n){n.target.checked?(this.secondaryFilters.ParticulierSort=n.target.value,this.reloadAnnonces()):(this.secondaryFilters.ParticulierSort="",this.reloadAnnonces())}criteresExist(){return""!==this.criteres.acountType||""!==this.criteres.category||this.criteres.filters!=={}||0!==this.criteres.subCategories.length||""!==this.criteres.typeAnnonce}reloadAnnonces(){this.secondaryFilters.selectFiltre&&""!==this.secondaryFilters.selectFiltre.trim()&&(this.hiddeSpinner=!1,"Tri: Plus r\xe9centes"===this.secondaryFilters.selectFiltre.trim()&&(this.annoncesTmp.sort(this.filterProvider.cmpByRecentAnnonces),this.annonces.sort(this.filterProvider.cmpByRecentAnnonces)),"Tri: Plus anciennes"===this.secondaryFilters.selectFiltre.trim()&&(this.annoncesTmp.sort(this.filterProvider.cmpByOldAnnonces),this.annonces.sort(this.filterProvider.cmpByOldAnnonces))),this.secondaryFilters.ParticulierSort&&"Particulier"===this.secondaryFilters.ParticulierSort.trim()&&(this.hiddeSpinner=!1,this.annoncesTmp=this.annonces.filter(n=>"Particulier"===n.annonce.compteType),this.currentPage=1),this.secondaryFilters.proSort&&"Professionnel"===this.secondaryFilters.proSort.trim()&&(this.hiddeSpinner=!1,this.annoncesTmp=this.annonces.filter(n=>"Professionnel"===n.annonce.compteType),this.currentPage=1),this.secondaryFilters.proSort&&"Professionnel"===this.secondaryFilters.proSort.trim()&&this.secondaryFilters.ParticulierSort&&"Particulier"===this.secondaryFilters.ParticulierSort.trim()&&(this.hiddeSpinner=!1,this.annoncesTmp=this.annonces,this.currentPage=1),"Professionnel"!==this.secondaryFilters.proSort.trim()&&"Particulier"!==this.secondaryFilters.ParticulierSort.trim()&&(this.hiddeSpinner=!1,this.annoncesTmp=this.annonces,this.currentPage=1,document.getElementById("Professionnels").click(),document.getElementById("Particuliers").click()),this.hiddeSpinner=!0}}var k=l("iInd"),I=t["\u0275crt"]({encapsulation:0,styles:[[".content-page[_ngcontent-%COMP%]   .filters-secondary[_ngcontent-%COMP%]{margin-left:3vw;margin-right:3vw;margin-top:3vh;font-family:Raleway}.content-page[_ngcontent-%COMP%]   .filters-secondary[_ngcontent-%COMP%]   .nbr-results[_ngcontent-%COMP%]{font-weight:700}.content-page[_ngcontent-%COMP%]   .filters-secondary[_ngcontent-%COMP%]   .pro-particulier[_ngcontent-%COMP%]{font-weight:700;width:37vw}.content-page[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{text-align:center;margin-top:5vh}.content-page[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;width:-webkit-max-content;width:-moz-max-content;width:max-content;margin-top:3vh}"]],data:{}});function S(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,3,"option",[],null,null,null,null,null)),t["\u0275did"](1,147456,null,0,r.j,[t.ElementRef,t.Renderer2,[8,null]],{value:[0,"value"]},null),t["\u0275did"](2,147456,null,0,r.n,[t.ElementRef,t.Renderer2,[8,null]],{value:[0,"value"]},null),(n()(),t["\u0275ted"](3,null,[" "," "]))],(function(n,e){n(e,1,0,t["\u0275inlineInterpolate"](1,"",e.context.$implicit,"")),n(e,2,0,t["\u0275inlineInterpolate"](1,"",e.context.$implicit,""))}),(function(n,e){n(e,3,0,e.context.$implicit)}))}function T(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,7,"div",[["class","location col x-lg-4"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,[["valueSelect",1]],null,6,"select",[],null,[[null,"change"]],(function(n,e,l){var i=!0;return"change"===e&&(i=!1!==n.component.getChoiceSecondFilter(t["\u0275nov"](n,1).value)&&i),i}),null,null)),(n()(),t["\u0275eld"](2,0,null,null,3,"option",[["selected",""],["value","Tri: Plus r\xe9centes"]],null,null,null,null,null)),t["\u0275did"](3,147456,null,0,r.j,[t.ElementRef,t.Renderer2,[8,null]],{value:[0,"value"]},null),t["\u0275did"](4,147456,null,0,r.n,[t.ElementRef,t.Renderer2,[8,null]],{value:[0,"value"]},null),(n()(),t["\u0275ted"](-1,null,[" Tri: Plus r\xe9centes "])),(n()(),t["\u0275and"](16777216,null,null,1,null,S)),t["\u0275did"](7,278528,null,0,o.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(n,e){var l=e.component;n(e,3,0,"Tri: Plus r\xe9centes"),n(e,4,0,"Tri: Plus r\xe9centes"),n(e,7,0,l.choicies)}),null)}function N(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,27,"div",[["class","filters-secondary"]],null,null,null,null,null)),t["\u0275prd"](512,null,o["\u0275NgClassImpl"],o["\u0275NgClassR2Impl"],[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2]),t["\u0275did"](2,278528,null,0,o.NgClass,[o["\u0275NgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t["\u0275pod"](3,{row:0,col:1}),(n()(),t["\u0275eld"](4,0,null,null,4,"div",[["class","nbr-results col x-lg-4 mr-0"]],null,null,null,null,null)),(n()(),t["\u0275eld"](5,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["Annonces : "])),(n()(),t["\u0275eld"](7,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),t["\u0275ted"](8,null,["",""])),(n()(),t["\u0275eld"](9,0,null,null,16,"div",[["class","pro-particulier row x-lg-4 ml-3 mr-0"]],null,null,null,null,null)),(n()(),t["\u0275eld"](10,0,null,null,7,"div",[],null,null,null,null,null)),t["\u0275prd"](512,null,o["\u0275NgClassImpl"],o["\u0275NgClassR2Impl"],[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2]),t["\u0275did"](12,278528,null,0,o.NgClass,[o["\u0275NgClassImpl"]],{ngClass:[0,"ngClass"]},null),t["\u0275pod"](13,{"col-6":0,"":1}),(n()(),t["\u0275eld"](14,0,null,null,0,"input",[["checked",""],["id","Particuliers"],["name","Particulier"],["type","checkbox"],["value","Particulier"]],null,[[null,"click"]],(function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.handleCheckboxParticulier(l)&&t),t}),null,null)),(n()(),t["\u0275eld"](15,0,null,null,2,"ion-label",[["color","primary"],["position","stacked"]],null,null,null,a.L,a.l)),t["\u0275did"](16,49152,null,0,u.N,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{color:[0,"color"],position:[1,"position"]},null),(n()(),t["\u0275ted"](-1,0,[" Particuliers "])),(n()(),t["\u0275eld"](18,0,null,null,7,"div",[],null,null,null,null,null)),t["\u0275prd"](512,null,o["\u0275NgClassImpl"],o["\u0275NgClassR2Impl"],[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2]),t["\u0275did"](20,278528,null,0,o.NgClass,[o["\u0275NgClassImpl"]],{ngClass:[0,"ngClass"]},null),t["\u0275pod"](21,{"col-6":0,"":1}),(n()(),t["\u0275eld"](22,0,null,null,0,"input",[["checked",""],["id","Professionnels"],["name","Professionnel"],["type","checkbox"],["value","Professionnel"]],null,[[null,"click"]],(function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.handleCheckboxPro(l)&&t),t}),null,null)),(n()(),t["\u0275eld"](23,0,null,null,2,"ion-label",[["color","primary"],["position","stacked"]],null,null,null,a.L,a.l)),t["\u0275did"](24,49152,null,0,u.N,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{color:[0,"color"],position:[1,"position"]},null),(n()(),t["\u0275ted"](-1,0,[" Professionnels "])),(n()(),t["\u0275and"](16777216,null,null,1,null,T)),t["\u0275did"](27,16384,null,0,o.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(n,e){var l=e.component,t=n(e,3,0,1==l.isWeb,0==l.isWeb);n(e,2,0,"filters-secondary",t);var i=n(e,13,0,1==l.isWeb,0==l.isWeb);n(e,12,0,i),n(e,16,0,"primary","stacked");var s=n(e,21,0,1==l.isWeb,0==l.isWeb);n(e,20,0,s),n(e,24,0,"primary","stacked"),n(e,27,0,l.choicies)}),(function(n,e){n(e,8,0,e.component.annoncesTmp.length)}))}function w(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","annonces-list"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,1,"afriflash-ads",[],null,[[null,"position"],[null,"emitId"]],(function(n,e,l){var t=!0,i=n.component;return"position"===e&&(t=!1!==i.getPosition(l)&&t),"emitId"===e&&(t=!1!==i.moreDetails(l)&&t),t}),c.c,c.b)),t["\u0275did"](2,114688,null,0,d.a,[h.a],{ads:[0,"ads"],itemsPerPage:[1,"itemsPerPage"],currentPage:[2,"currentPage"]},{position:"position",emitId:"emitId"})],(function(n,e){var l=e.component;n(e,2,0,l.annoncesTmp,l.nbrAnnoncesPerPage,l.currentPage)}),null)}function A(n){return t["\u0275vid"](0,[t["\u0275qud"](402653184,1,{content:0}),(n()(),t["\u0275eld"](1,0,null,null,12,"ion-content",[],null,null,null,a.E,a.e)),t["\u0275did"](2,49152,[[1,4],["content",4]],0,u.u,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["\u0275eld"](3,0,null,0,10,"div",[["class","content-page"]],null,null,null,null,null)),(n()(),t["\u0275eld"](4,0,null,null,2,"div",[["class","filters"]],null,null,null,null,null)),(n()(),t["\u0275eld"](5,0,null,null,1,"app-afriflash-ad-filters",[],null,[[null,"sendFilters"]],(function(n,e,l){var t=!0;return"sendFilters"===e&&(t=!1!==n.component.getFilters(l)&&t),t}),p.c,p.b)),t["\u0275did"](6,114688,null,0,m.a,[h.a,g.a,f.a,v.a,P.a,y.a],{categoryDefault:[0,"categoryDefault"]},{sendFilters:"sendFilters"}),(n()(),t["\u0275and"](16777216,null,null,1,null,N)),t["\u0275did"](8,16384,null,0,o.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](9,0,null,null,2,"div",[["class","spinner"]],[[8,"hidden",0]],null,null,null,null)),(n()(),t["\u0275eld"](10,0,null,null,1,"ion-spinner",[["name","bubbles"]],null,null,null,a.U,a.u)),t["\u0275did"](11,49152,null,0,u.sb,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{name:[0,"name"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,w)),t["\u0275did"](13,16384,null,0,o.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(n,e){var l=e.component;n(e,6,0,l.categoryDefault),n(e,8,0,l.annoncesTmp),n(e,11,0,"bubbles"),n(e,13,0,l.annoncesTmp&&!0===l.hiddeSpinner)}),(function(n,e){n(e,9,0,e.component.hiddeSpinner)}))}function x(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"app-search-annonce",[],null,null,null,A,I)),t["\u0275did"](1,114688,null,0,R,[f.a,u.Ib,P.a,g.a,h.a,C.a,k.a,v.a,F.a],null,null)],(function(n,e){n(e,1,0)}),null)}var D=t["\u0275ccf"]("app-search-annonce",R,x,{},{},[]),E=l("+vzi"),_=l("3DGH"),M=l("Iyql"),O=l("uoUw"),W=l("R5Ub"),L=l("rW0a"),V=l("MkDv"),Z=l("xxju"),j=l("V72o"),B=l("684C"),z=l("K8Kf"),K=l("BTAL"),J=l("08vm"),q=l("KhRk"),Q=l("+gxW"),U=l("o+xA"),H=l("NT4y"),$=l("N13x"),G=l("IQpR"),Y=l("oZQs"),X=l("Fx5N"),nn=l("TgJl"),en=l("gJkv"),ln=l("xkgV"),tn=l("TSSN");class sn{}var rn=l("r61p"),on=l("j1ZV");l.d(e,"SearchAnnoncePageModuleNgFactory",(function(){return an}));var an=t["\u0275cmf"](i,[],(function(n){return t["\u0275mod"]([t["\u0275mpd"](512,t.ComponentFactoryResolver,t["\u0275CodegenComponentFactoryResolver"],[[8,[s.a,D,E.a,_.a,M.a,O.a,W.a,L.a,V.a,Z.a,j.a,B.a,z.a,K.a,J.a,q.a,Q.a,U.a,H.a,$.a,G.a,Y.a,c.a,p.a,X.a,nn.a,en.a]],[3,t.ComponentFactoryResolver],t.NgModuleRef]),t["\u0275mpd"](4608,o.NgLocalization,o.NgLocaleLocalization,[t.LOCALE_ID,[2,o["\u0275angular_packages_common_common_a"]]]),t["\u0275mpd"](4608,r.m,r.m,[]),t["\u0275mpd"](4608,u.b,u.b,[t.NgZone,t.ApplicationRef]),t["\u0275mpd"](4608,u.Hb,u.Hb,[u.b,t.ComponentFactoryResolver,t.Injector]),t["\u0275mpd"](4608,u.Lb,u.Lb,[u.b,t.ComponentFactoryResolver,t.Injector]),t["\u0275mpd"](4608,r.b,r.b,[]),t["\u0275mpd"](4608,ln.e,ln.e,[]),t["\u0275mpd"](4608,tn.g,tn.f,[]),t["\u0275mpd"](4608,tn.c,tn.e,[]),t["\u0275mpd"](4608,tn.i,tn.d,[]),t["\u0275mpd"](4608,tn.b,tn.a,[]),t["\u0275mpd"](4608,tn.k,tn.k,[tn.l,tn.g,tn.c,tn.i,tn.b,tn.m,tn.n]),t["\u0275mpd"](1073742336,o.CommonModule,o.CommonModule,[]),t["\u0275mpd"](1073742336,r.l,r.l,[]),t["\u0275mpd"](1073742336,r.c,r.c,[]),t["\u0275mpd"](1073742336,u.Eb,u.Eb,[]),t["\u0275mpd"](1073742336,k.n,k.n,[[2,k.s],[2,k.m]]),t["\u0275mpd"](1073742336,sn,sn,[]),t["\u0275mpd"](1073742336,tn.h,tn.h,[]),t["\u0275mpd"](1073742336,r.k,r.k,[]),t["\u0275mpd"](1073742336,rn.a,rn.a,[]),t["\u0275mpd"](1073742336,ln.a,ln.a,[]),t["\u0275mpd"](1073742336,on.a,on.a,[]),t["\u0275mpd"](1073742336,i,i,[]),t["\u0275mpd"](1024,k.k,(function(){return[[{path:"",component:R}]]}),[]),t["\u0275mpd"](256,tn.n,void 0,[]),t["\u0275mpd"](256,tn.m,void 0,[])])}))}}]);