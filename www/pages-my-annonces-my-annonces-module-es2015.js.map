{"version":3,"sources":["./src/app/pages/my-annonces/my-annonces.page.html","./src/app/pages/my-annonces/my-annonces-routing.module.ts","./src/app/pages/my-annonces/my-annonces.module.ts","./src/app/pages/my-annonces/my-annonces.page.scss","./src/app/pages/my-annonces/my-annonces.page.ts"],"names":[],"mappings":";;;;;;;;;AAAA,qrB;;;;;;;;;;;;;;;;;;;ACAyC;AACc;AAEH;AAEpD,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,gEAAc;KAC1B;CACF,CAAC;AAMF,IAAa,2BAA2B,GAAxC,MAAa,2BAA2B;CAAG;AAA9B,2BAA2B;IAJvC,8DAAQ,CAAC;QACR,OAAO,EAAE,CAAC,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;QACxC,OAAO,EAAE,CAAC,4DAAY,CAAC;KACxB,CAAC;GACW,2BAA2B,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;;AChBC;AACM;AACF;AAEA;AAE8B;AAEvB;AACgB;AAYpE,IAAa,oBAAoB,GAAjC,MAAa,oBAAoB;CAAG;AAAvB,oBAAoB;IAVhC,8DAAQ,CAAC;QACN,OAAO,EAAE;YACL,4DAAY;YACZ,0DAAW;YACX,0DAAW;YACX,uFAA2B;YAC3B,8EAAgB;SACnB;QACH,YAAY,EAAE,CAAC,gEAAc,CAAC;KAC/B,CAAC;GACW,oBAAoB,CAAG;AAAH;;;;;;;;;;;;ACrBjC,gDAAgD,gCAAgC,GAAG,0BAA0B,uBAAuB,qBAAqB,GAAG,6CAA6C,+6B;;;;;;;;;;;;;;;;;;;;;;;;ACAzJ;AACqE;AACxE;AACkE;AACf;AACM;AACO;AACJ;AAOzG,IAAa,cAAc,GAA3B,MAAa,cAAc;IAwFvB,YAAoB,UAAwC,EACxC,OAAsB,EACtB,WAAyC,EACzC,YAAmC,EACnC,MAA+B,EAC/B,OAAiC,EACjC,aAAqC;QANrC,eAAU,GAAV,UAAU,CAA8B;QACxC,YAAO,GAAP,OAAO,CAAe;QACtB,gBAAW,GAAX,WAAW,CAA8B;QACzC,iBAAY,GAAZ,YAAY,CAAuB;QACnC,WAAM,GAAN,MAAM,CAAyB;QAC/B,YAAO,GAAP,OAAO,CAA0B;QACjC,kBAAa,GAAb,aAAa,CAAwB;QA3EzD;;WAEG;QACI,qBAAgB,GAInB;YACA,OAAO,EAAE,eAAe;YACxB,eAAe,EAAE,aAAa;YAC9B,YAAY,EAAE,EAAE;SACnB,CAAC;QAYF;;WAEG;QACI,iBAAY,GAAG,IAAI,CAAC;QAO3B;;WAEG;QACI,cAAS,GAAG,EAAE,CAAC;QAEtB;;WAEG;QACI,gBAAW,GAAG,CAAC,CAAC;QAOvB;;WAEG;QACI,UAAK,GAAG,GAAG,CAAC;QAEnB;;WAEG;QACI,SAAI,GAAG,CAAC,CAAC;QAEhB;;WAEG;QACI,uBAAkB,GAAG,EAAE,CAAC;QAE/B;;WAEG;QACI,oBAAe,GAAG,EAAE,CAAC;IAU5B,CAAC;IAED,QAAQ;QAEJ,mCAAmC;QACnC,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;QAEpB,wDAAwD;QACxD,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC,UAAU,EAAE,CAAC;QAE/C,kCAAkC;QAClC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC;QAEjC,yBAAyB;QACzB,IAAI,CAAC,WAAW,EAAE,CAAC;QAEnB,+DAA+D;QAC/D,IAAI,CAAC,IAAI,EAAE,CAAC;QAEZ,IAAI,CAAC,UAAU,CAAC,cAAc,CAAC,SAAS,CACpC,CAAC,MAAM,EAAE,EAAE;YACP,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;YACxB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;YACrB,IAAI,CAAC,WAAW,EAAE,CAAC;QACvB,CAAC,CACJ,CAAC;IACN,CAAC;IAED;;OAEG;IACI,IAAI;QACP,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC,IAAI,CACpC,CAAC,IAAI,EAAE,EAAE;YACL,IAAI,CAAC,IAAI,EAAE;gBACP,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC;aAClC;QACL,CAAC,CAAC,CAAC;IAEX,CAAC;IAED;;;OAGG;IACI,UAAU,CAAC,QAAa;QAC3B,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;QACzB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACrB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;QACxB,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC3B,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC;QACd,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC;QACrB,IAAI,CAAC,WAAW,EAAE,CAAC;IACvB,CAAC;IAED;;;OAGG;IACI,WAAW,CAAC,QAAgB;QAC/B,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC;QAC5B,6BAA6B;QAC7B,IAAI,QAAQ,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,QAAQ,CAAC,EAAE;YAC1D,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YAC9B,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC;YACnC,IAAI,CAAC,WAAW,EAAE,CAAC;SACtB;IACL,CAAC;IAED;;;OAGG;IACI,WAAW,CAAC,SAAc;QAC7B,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,iBAAiB,EAAE;YAC5C,WAAW,EAAE,EAAC,EAAE,EAAE,SAAS,EAAC;SAC/B,CAAC,CAAC;IACP,CAAC;IAED;;OAEG;IACW,WAAW;;YACrB,MAAM,WAAW,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;YAC9D,MAAM,IAAI,GAAG;gBACT,KAAK,EAAE,IAAI,CAAC,KAAK;gBACjB,IAAI,EAAE,IAAI,CAAC,IAAI;gBACf,IAAI,EAAE,WAAW,CAAC,QAAQ;aAC7B,CAAC;YACF,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;YAC1B,IAAI,CAAC,WAAW,CAAC,iBAAiB,CAAC,gBAAgB,EAAE,IAAI,CAAC,CAAC,SAAS,CAChE,CAAC,QAAQ,EAAE,EAAE;gBACT,IAAI,CAAC,IAAI,CAAC,QAAQ,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE;oBACrC,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;oBACnB,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;oBACtB,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;iBACvB;gBACD,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC,CAAC;gBACvD,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC,CAAC;gBAC7D,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,aAAa,CAAC,eAAe,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;gBACnE,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;gBACzB,2CAA2C;YAC/C,CAAC,CACJ,CAAC;QACN,CAAC;KAAA;CAGJ;;YAlHmC,4HAA4B;YAC/B,4DAAa;YACT,sHAA4B;YAC3B,uGAAqB;YAC3B,6GAAuB;YACtB,gHAAwB;YAClB,oHAAsB;;AA9FhD,cAAc;IAL1B,+DAAS,CAAC;QACP,QAAQ,EAAE,iBAAiB;QAC3B,+JAAsC;;KAEzC,CAAC;2EAyFkC,4HAA4B;QAC/B,4DAAa;QACT,sHAA4B;QAC3B,uGAAqB;QAC3B,6GAAuB;QACtB,gHAAwB;QAClB,oHAAsB;GA9FhD,cAAc,CA0M1B;AA1M0B","file":"pages-my-annonces-my-annonces-module-es2015.js","sourcesContent":["module.exports = \"\\r\\n<ion-content>\\r\\n\\r\\n  <div class=\\\"content-page\\\">\\r\\n\\r\\n    <!-- Spinner -->\\r\\n    <div class=\\\"spinner\\\" [hidden]=\\\"hiddeSpinner\\\">\\r\\n      <ion-spinner name=\\\"bubbles\\\"></ion-spinner>\\r\\n    </div>\\r\\n\\r\\n    <!-- LISTES DES ANNONCES -->\\r\\n    <div class=\\\"annonces-list\\\" *ngIf=\\\"annoncesTmp && hiddeSpinner === true\\\">\\r\\n\\r\\n      <afriflash-ads [ads]=\\\"annoncesTmp\\\" [itemsPerPage]=\\\"nbrAnnoncesPerPage\\\"\\r\\n                     [currentPage]=\\\"currentPage\\\" [myadd]=\\\"true\\\"\\r\\n                     (position)=\\\"getPosition($event)\\\" (emitId)=\\\"moreDetails($event)\\\">\\r\\n\\r\\n      </afriflash-ads>\\r\\n\\r\\n    </div>\\r\\n\\r\\n  </div>\\r\\n\\r\\n</ion-content>\\r\\n\"","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { MyAnnoncesPage } from './my-annonces.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: MyAnnoncesPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class MyAnnoncesPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { MyAnnoncesPageRoutingModule } from './my-annonces-routing.module';\r\n\r\nimport { MyAnnoncesPage } from './my-annonces.page';\r\nimport {ComponentsModule} from \"../../components/components.module\";\r\n\r\n@NgModule({\r\n    imports: [\r\n        CommonModule,\r\n        FormsModule,\r\n        IonicModule,\r\n        MyAnnoncesPageRoutingModule,\r\n        ComponentsModule\r\n    ],\r\n  declarations: [MyAnnoncesPage]\r\n})\r\nexport class MyAnnoncesPageModule {}\r\n","module.exports = \".content-page .annonces-list {\\n  margin-top: 14vh !important;\\n}\\n.content-page .spinner {\\n  text-align: center;\\n  margin-top: 50vh;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvbXktYW5ub25jZXMvQzpcXFVzZXJzXFx0bWRpYWxsb1xcRG9jdW1lbnRzXFxQcm9qZXRfQWZyaXF1ZVxcQWZyaWZsYXNoXFxhZnJpZmxhc2gtZnJvbnQvc3JjXFxhcHBcXHBhZ2VzXFxteS1hbm5vbmNlc1xcbXktYW5ub25jZXMucGFnZS5zY3NzIiwic3JjL2FwcC9wYWdlcy9teS1hbm5vbmNlcy9teS1hbm5vbmNlcy5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUU7RUFDRSwyQkFBQTtBQ0RKO0FESUU7RUFDRSxrQkFBQTtFQUNBLGdCQUFBO0FDRkoiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9teS1hbm5vbmNlcy9teS1hbm5vbmNlcy5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuY29udGVudC1wYWdlIHtcclxuXHJcbiAgLmFubm9uY2VzLWxpc3Qge1xyXG4gICAgbWFyZ2luLXRvcDogMTR2aCAhaW1wb3J0YW50O1xyXG4gIH1cclxuXHJcbiAgLnNwaW5uZXIge1xyXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gICAgbWFyZ2luLXRvcDogNTB2aDtcclxuICB9XHJcbn1cclxuIiwiLmNvbnRlbnQtcGFnZSAuYW5ub25jZXMtbGlzdCB7XG4gIG1hcmdpbi10b3A6IDE0dmggIWltcG9ydGFudDtcbn1cbi5jb250ZW50LXBhZ2UgLnNwaW5uZXIge1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIG1hcmdpbi10b3A6IDUwdmg7XG59Il19 */\"","import {Component, OnInit} from '@angular/core';\r\nimport {AfriflashObservablesProvider} from '../../../providers/afriflash-observables/afriflash-observables.provider';\r\nimport {NavController} from '@ionic/angular';\r\nimport {AfriflashHttpAnnonceProvider} from '../../../providers/afriflash-http/afriflash-http-annonce.provider';\r\nimport {AfriflashDataProvider} from '../../../providers/afriflash-data/afriflash-data.provider';\r\nimport {AfriflashConfigProvider} from '../../../providers/afriflash-config/afriflash-config.provider';\r\nimport {AfriflashUtilsProvider} from '../../../providers/afriflash-utils-functions/afriflash-utils.provider';\r\nimport {AfriflashSessionProvider} from '../../../providers/afriflash-session/afriflash-session.provider';\r\n\r\n@Component({\r\n    selector: 'app-my-annonces',\r\n    templateUrl: './my-annonces.page.html',\r\n    styleUrls: ['./my-annonces.page.scss'],\r\n})\r\nexport class MyAnnoncesPage implements OnInit {\r\n\r\n    /**\r\n     * Liste des annonces\r\n     */\r\n    public annonces: any[];\r\n\r\n    /**\r\n     * Critères générales\r\n     */\r\n    public criteres: {\r\n        typeAnnonce: string,\r\n        category: string,\r\n        country: string,\r\n        subCategories: string[],\r\n        filters: any,\r\n        acountType: string\r\n    };\r\n\r\n    /**\r\n     * Filtres secondaires\r\n     */\r\n    public secondaryFilters: {\r\n        proSort: string,\r\n        ParticulierSort: string,\r\n        selectFiltre: string\r\n    } = {\r\n        proSort: 'Professionnel',\r\n        ParticulierSort: 'Particulier',\r\n        selectFiltre: ''\r\n    };\r\n\r\n    /**\r\n     * Liste des choix des filtres secondaires\r\n     */\r\n    public choicies: Array<string>;\r\n\r\n    /**\r\n     * Resultat de la recherche\r\n     */\r\n    public results: string;\r\n\r\n    /**\r\n     * Afficher le spinner ou non\r\n     */\r\n    public hiddeSpinner = true;\r\n\r\n    /**\r\n     * Savoir si c'est du web ou non\r\n     */\r\n    public isWeb: boolean;\r\n\r\n    /**\r\n     * numéro des pages\r\n     */\r\n    public positions = [];\r\n\r\n    /**\r\n     * Position de la page courante\r\n     */\r\n    public currentPage = 1;\r\n\r\n    /**\r\n     * Annonces temporaires\r\n     */\r\n    public annoncesTmp: Array<any>;\r\n\r\n    /**\r\n     * La limite pour récuperer les données\r\n     */\r\n    public limit = 100;\r\n\r\n    /**\r\n     * Données à ignorer\r\n     */\r\n    public skip = 0;\r\n\r\n    /**\r\n     * Le nombre d'annonces par pages\r\n     */\r\n    public nbrAnnoncesPerPage = 20;\r\n\r\n    /**\r\n     * Valeur de la categorie par défaut\r\n     */\r\n    public categoryDefault = '';\r\n    public userId: any;\r\n\r\n    constructor(private observable: AfriflashObservablesProvider,\r\n                private navCtrl: NavController,\r\n                private httpAnnonce: AfriflashHttpAnnonceProvider,\r\n                private dataProvider: AfriflashDataProvider,\r\n                private config: AfriflashConfigProvider,\r\n                private session: AfriflashSessionProvider,\r\n                private utilsProvider: AfriflashUtilsProvider) {\r\n    }\r\n\r\n    ngOnInit() {\r\n\r\n        // initialisation tableau positions\r\n        this.positions = [];\r\n\r\n        // Initialisation des choix pour les filtres secondaires\r\n        this.choicies = this.dataProvider.getChoices();\r\n\r\n        // Initialisation de la plateforme\r\n        this.isWeb = this.config.isWeb();\r\n\r\n        // Chargement des données\r\n        this.getAnnonces();\r\n\r\n        // Pour rediriger vers le home quand le user n'est pas connecté\r\n        this.init();\r\n\r\n        this.observable.loadMyAnnonces.subscribe(\r\n            (idUser) => {\r\n                this.annoncesTmp = null;\r\n                this.annonces = null;\r\n                this.getAnnonces();\r\n            }\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Verifie si le user est connecté\r\n     */\r\n    public init() {\r\n        this.session.getItem('socialusers').then(\r\n            (user) => {\r\n                if (!user) {\r\n                    this.navCtrl.navigateRoot('/');\r\n                }\r\n            });\r\n\r\n    }\r\n\r\n    /**\r\n     * Recupère les critères\r\n     * @param criteres critères\r\n     */\r\n    public getFilters(criteres: any) {\r\n        this.criteres = criteres;\r\n        this.annonces = null;\r\n        this.annoncesTmp = null;\r\n        console.log(this.criteres);\r\n        this.skip = 0;\r\n        this.currentPage = 1;\r\n        this.getAnnonces();\r\n    }\r\n\r\n    /**\r\n     * Recupere la position de la page courante\r\n     * @param position Position de la page\r\n     */\r\n    public getPosition(position: number) {\r\n        this.currentPage = position;\r\n        // Recuperer un multiple de 5\r\n        if (position % 5 === 0 && !this.positions.includes(position)) {\r\n            this.positions.push(position);\r\n            this.skip = this.skip + this.limit;\r\n            this.getAnnonces();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Afficher plus de details pour l'annonce en question\r\n     * @param id id\r\n     */\r\n    public moreDetails(annonceId: any) {\r\n        this.navCtrl.navigateForward('details-annonce', {\r\n            queryParams: {id: annonceId}\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Recupère la liste des annonces\r\n     */\r\n    private async getAnnonces() {\r\n        const currentUser = await this.session.getItem('socialusers');\r\n        const body = {\r\n            limit: this.limit,\r\n            skip: this.skip,\r\n            user: currentUser.objectId\r\n        };\r\n        this.hiddeSpinner = false;\r\n        this.httpAnnonce.getAllWithFilters('annonce/byuser', body).subscribe(\r\n            (annonces) => {\r\n                if (!this.annonces && !this.annoncesTmp) {\r\n                    this.annonces = [];\r\n                    this.annoncesTmp = [];\r\n                    this.positions = [];\r\n                }\r\n                this.annonces = this.annonces.concat(annonces.slice());\r\n                this.annoncesTmp = this.annoncesTmp.concat(annonces.slice());\r\n                this.results = this.utilsProvider.customizeNumber(annonces.length);\r\n                this.hiddeSpinner = true;\r\n                // this.observable.spinnerEvent.emit(true);\r\n            }\r\n        );\r\n    }\r\n\r\n\r\n}\r\n"],"sourceRoot":""}